type: object
additionalProperties: false
required:
  - featureRef
  - etimFeatureCode
properties:
  featureRef:
    description: |
      Server-generated opaque reference key that uniquely identifies this feature value
      within the scope of an ETIM classification.
      
      This is a technical identifier not present in the ETIM xChange domain model.
    $ref: ../../../../shared/schemas/identifiers/TechnicalId.yaml
    examples:
      - "feat-ef000123-001"
      - "a1b2c3d4-e5f6-7890-abcd-ef1234567890"
  
  etimFeatureCode:
    type: string
    pattern: "^EF([0-9]{6}|I[0-9]{5}|[A-Z]{2}[0-9]{4})$"
    description: |
      ETIM standardized feature code identifying a specific product characteristic.
      Format: EF followed by 6 digits, or EFI followed by 5 digits, or EF followed by 2 letters and 4 digits.
      
      **ETIM xChange**: `EtimFeatureCode`  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].EtimFeatureCode`
    examples:
      - "EF000123"
      - "EFI00456"
  
  etimValueCode:
    type: ["string", "null"]
    pattern: "^EV[0-9]{6}$"
    description: |
      ETIM standardized value code for alphanumeric features (e.g., enumerations, selections).
      Format: EV followed by 6 digits.
      
      **ETIM xChange**: `EtimValueCode`  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].EtimValueCode`
    examples:
      - "EV000789"
      - null
  
  etimValueNumeric:
    type: ["number", "null"]
    format: decimal
    multipleOf: 0.0001
    minimum: -999999999999.9999
    maximum: 999999999999.9999
    description: |
      Numeric value for the ETIM feature (supports up to 4 decimal places).
      Converted from ETIM xChange string pattern to number type.
      
      **ETIM xChange**: `EtimValueNumeric` (string with pattern)  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].EtimValueNumeric`
    examples:
      - 230.0
      - 50.5
      - -10.25
      - null
  
  etimValueRangeLower:
    type: ["number", "null"]
    format: decimal
    multipleOf: 0.0001
    minimum: -999999999999.9999
    maximum: 999999999999.9999
    description: |
      Lower bound of a numeric range for the feature value.
      Converted from ETIM xChange string pattern to number type.
      
      **ETIM xChange**: `EtimValueRangeLower` (string with pattern)  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].EtimValueRangeLower`
    examples:
      - 100.0
      - 0.5
      - null
  
  etimValueRangeUpper:
    type: ["number", "null"]
    format: decimal
    multipleOf: 0.0001
    minimum: -999999999999.9999
    maximum: 999999999999.9999
    description: |
      Upper bound of a numeric range for the feature value.
      Converted from ETIM xChange string pattern to number type.
      
      **ETIM xChange**: `EtimValueRangeUpper` (string with pattern)  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].EtimValueRangeUpper`
    examples:
      - 240.0
      - 60.0
      - null
  
  etimValueLogical:
    type: ["boolean", "null"]
    description: |
      Boolean/logical value for yes/no type features.
      
      **ETIM xChange**: `EtimValueLogical`  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].EtimValueLogical`
    examples:
      - true
      - false
      - null
  
  etimValueDetails:
    type: ["array", "null"]
    items:
      type: object
      additionalProperties: false
      required:
        - etimValueDetails
      properties:
        language:
          type: ["string", "null"]
          pattern: "^[a-z]{2}[-][A-Z]{2}$"
          description: Language code for the value details
          examples:
            - "en-GB"
        etimValueDetails:
          type: string
          minLength: 1
          maxLength: 255
          description: Free-text details about the feature value
          examples:
            - "Special coating applied"
    description: |
      Multilingual free-text descriptions providing additional details about the feature value.
      
      **ETIM xChange**: `EtimValueDetails`  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].EtimValueDetails[]`
    examples:
      - - language: "en-GB"
          etimValueDetails: "Certified for outdoor use"
      - null
  
  reasonNoValue:
    type: ["string", "null"]
    enum:
      - "MV"
      - "NA"
      - "UN"
      - null
    description: |
      Reason code when no feature value is provided.
      
      - `MV`: Multiple values - feature has multiple applicable values
      - `NA`: Not applicable - feature does not apply to this product
      - `UN`: Unknown - value is currently unknown or unavailable
      
      **ETIM xChange**: `ReasonNoValue`  
      **Path**: `Supplier[].Product[].EtimClassification[].EtimFeatures[].ReasonNoValue`
    examples:
      - "NA"
      - null

examples:
  - featureRef: "feat-ef000123-001"
    etimFeatureCode: "EF000123"
    etimValueCode: "EV000789"
  - featureRef: "feat-ef000456-002"
    etimFeatureCode: "EF000456"
    etimValueNumeric: 230.0
  - featureRef: "feat-ef000789-003"
    etimFeatureCode: "EF000789"
    etimValueRangeLower: 100.0
    etimValueRangeUpper: 240.0
  - featureRef: "feat-ef001234-004"
    etimFeatureCode: "EF001234"
    etimValueLogical: true
  - featureRef: "feat-ef005678-005"
    etimFeatureCode: "EF005678"
    reasonNoValue: "NA"
