get:
  operationId: getBulkAllowanceSurcharges
  summary: Retrieve trade item allowances and surcharges in bulk
  description: |
    Retrieve trade item allowances and surcharges in bulk with cursor-based pagination.
    Returns discount allowances and additional charge surcharges applied to trade item pricing.
    
    **Flattened Structure**: Each row represents a single allowance/surcharge entry with embedded 
    composite key (`supplierIdGln` + `supplierItemNumber`) and pricing reference keys 
    (`priceUnit` + `priceQuantity` + `priceValidityDate`).
    
    **Join Pattern**: Use this endpoint in combination with `/bulk/trade-item-pricings` to build
    a complete pricing picture:
    ```sql
    SELECT p.*, a.*
    FROM pricings p
    LEFT JOIN allowance_surcharges a
      ON p.supplierIdGln = a.supplierIdGln
     AND p.supplierItemNumber = a.supplierItemNumber
     AND p.priceUnit = a.priceUnit
     AND p.priceQuantity = a.priceQuantity
     AND (p.priceValidityDate = a.priceValidityDate OR a.priceValidityDate IS NULL)
    ```
    
    This endpoint is optimized for:
    - Predictable payload sizes per row
    - Efficient cursor-based pagination
    - ETL/data warehouse ingestion (star schema: pricing fact + surcharges fact)
    - Price adjustment synchronization scenarios
    
    **ETIM xChange**: Bulk retrieval of `AllowanceSurcharge[]` data  
    **Path**: `Supplier[].Product[].TradeItem[].Pricing[].AllowanceSurcharge[]`
  tags:
    - TradeItems bulk
  parameters:
    - $ref: ../../../../shared/parameters/query/cursor.yaml
    - $ref: ../../../../shared/parameters/query/limit.yaml
    - $ref: ../../../../shared/parameters/query/selection-id.yaml
    - $ref: ../../../../shared/parameters/query/mutation-date-time.yaml
    - $ref: ../../../../shared/parameters/query/supplier-id-gln-filter.yaml
  responses:
    '200':
      description: Successfully retrieved allowance/surcharge entries (1 row per surcharge)
      content:
        application/json:
          schema:
            $ref: ../../schemas/responses/BulkAllowanceSurchargesResponse.yaml
          examples:
            success:
              summary: Successful bulk retrieval (flattened - 1 row per surcharge entry)
              value:
                data:
                  - supplierIdGln: "8712423012485"
                    supplierItemNumber: "SKU-LAMP-001"
                    priceUnit: "C62"
                    priceQuantity: 1
                    priceValidityDate: "2025-01-01"
                    allowanceSurchargeIndicator: ALLOWANCE
                    allowanceSurchargeType: AEQ
                    allowanceSurchargeSequenceNumber: 1
                    allowanceSurchargePercentage: 5.5
                    allowanceSurchargeMinimumQuantity: 50
                    allowanceSurchargeDescription: "Bulk quantity discount"
                  - supplierIdGln: "8712423012485"
                    supplierItemNumber: "SKU-CABLE-002"
                    priceUnit: "MTR"
                    priceQuantity: 1
                    priceValidityDate: "2025-01-01"
                    allowanceSurchargeIndicator: SURCHARGE
                    allowanceSurchargeType: DBD
                    allowanceSurchargeSequenceNumber: 1
                    allowanceSurchargeAmount: 25.00
                    allowanceSurchargeDescription: "Delivery surcharge"
                meta:
                  cursor: "eyJzdXBwbGllcklkR2xuIjoiODcxMjQyMzAxMjQ4NSJ9"
                  hasNext: true
                  hasPrev: false
                  limit: 100
                  estimatedTotal: 3250
    '400':
      $ref: ../../../../shared/responses/400-bad-request.yaml
    '401':
      $ref: ../../../../shared/responses/401-unauthorized.yaml
    '403':
      $ref: ../../../../shared/responses/403-forbidden.yaml
    '500':
      $ref: ../../../../shared/responses/500-internal-server-error.yaml
