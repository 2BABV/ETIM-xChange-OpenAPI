type: object
description: |
  Flattened trade item pricing for bulk retrieval.
  Each row represents a single price entry with the trade item identifier, following the 
  same pattern as `ProductEtimClassificationFeature` (1 row = 1 data point).
  
  This flattened structure is optimized for:
  - Predictable payload sizes per row
  - Efficient cursor-based pagination
  - ETL/data warehouse ingestion
  - Streaming data processing
  
  A trade item may have multiple pricing entries (e.g., quantity tiers, validity periods),
  resulting in multiple rows with the same composite key but different pricing data.
  
  **Allowances & Surcharges**: Available via separate `/bulk/trade-item-allowance-surcharges` endpoint.
  Join using `pricingRef` to correlate pricing entries with their allowances/surcharges.
  
  **Payload Optimization**: Optional properties with null values may be omitted from the response
  to minimize payload size. Clients should treat missing properties as null/not applicable.
  
  **ETIM xChange**: `Pricing`
  **Path**: `Supplier[].Product[].TradeItem[].Pricing[]`
additionalProperties: false
required:
  - supplierIdGln
  - supplierItemNumber
  - pricingRef
  - priceUnit
  - priceQuantity
  - currencyCode
  - priceValidityDate
properties:
  # =========================================================================
  # KEY FIELDS (required for bulk retrieval)
  # =========================================================================
  
  supplierIdGln:
    type: string
    pattern: "^[0-9]{13}$"
    description: |
      Global Location Number (GLN) of the supplier. 13-digit GS1 identifier.
      Part of the composite key for the trade item.
      
      **ETIM xChange**: `SupplierIdGln`  
      **Path**: `Supplier[].SupplierId.SupplierIdGln`
    examples:
      - "1234567890123"
      - "8712423012485"
  
  supplierItemNumber:
    type: string
    minLength: 1
    maxLength: 35
    description: |
      Supplier's unique item number. Part of the composite key for the trade item.
      This is the primary identifier for items in the supplier's catalog system.
      
      **ETIM xChange**: `SupplierItemNumber`  
      **Path**: `Supplier[].Product[].TradeItem[].ItemIdentification.SupplierItemNumber`
    examples:
      - "SKU-12345"
      - "ITEM-ABC-789"
  
  pricingRef:
    description: |
      Server-generated opaque reference key that uniquely identifies this pricing entry
      within the scope of a trade item (identified by `supplierIdGln` + `supplierItemNumber`).
      
      This is a technical identifier not present in the ETIM xChange domain model.
      Use `pricingRef` to correlate pricing entries with their allowances/surcharges
      from the `/bulk/trade-item-allowance-surcharges` endpoint.
    $ref: ../../../../shared/schemas/identifiers/TechnicalId.yaml
    examples:
      - "price-c62-1-20250101"
      - "f47ac10b-58cc-4372-a567-0e02b2c3d479"
  
  # =========================================================================
  # PRICING FIELDS (flattened from TradeItem.Pricing[])
  # =========================================================================
  
  priceUnit:
    description: |
      Unit for which the price applies (e.g., pieces, boxes, meters).
      
      **ETIM xChange**: `PriceUnit`
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].PriceUnit`
    $ref: ../../../../shared/schemas/common/UnitCodes.yaml
    examples:
      - C62  # Piece
      - BX   # Box
      - MTR  # Meter
  
  priceUnitFactor:
    type: ["number", "null"]
    description: |
      Factor to convert price unit to order unit (converted from ETIM xChange string to number).
      
      **ETIM xChange**: `PriceUnitFactor` (string with pattern)
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].PriceUnitFactor`
    minimum: 0
    multipleOf: 0.0001
    maximum: 99999999999.9999
    examples:
      - 1.0
      - 100.0
  
  priceQuantity:
    type: number
    description: |
      Quantity for which the price applies (converted from ETIM xChange string to number).
      Used for quantity-based pricing tiers.
      
      **ETIM xChange**: `PriceQuantity` (string with pattern)
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].PriceQuantity`
    minimum: 0
    multipleOf: 0.0001
    maximum: 99999.9999
    examples:
      - 1
      - 10
      - 100
  currencyCode:
    description: |
      Currency code for all monetary values in this pricing entry.
      Sourced from ETIM xChange `CurrencyCode` at catalog level.
    $ref: ../../../../shared/schemas/common/CurrencyCode.yaml
    examples:
      - EUR
  
  priceOnRequest:
    type: ["boolean", "null"]
    description: |
      Indicates whether the price is available only on request.
      
      **ETIM xChange**: `PriceOnRequest`
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].PriceOnRequest`
    examples:
      - false
      - true
  
  grossListPrice:
    type: ["number", "null"]
    description: |
      Gross list price (before discounts) (converted from ETIM xChange string to number).
      
      **ETIM xChange**: `GrossListPrice` (string with pattern)
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].GrossListPrice`
    minimum: 0
    multipleOf: 0.0001
    maximum: 99999999999.9999
    examples:
      - 130.0
      - 1500.0
  
  netPrice:
    type: ["number", "null"]
    description: |
      Net price (after discounts, before tax) (converted from ETIM xChange string to number).
      
      **ETIM xChange**: `NetPrice` (string with pattern)
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].NetPrice`
    minimum: 0
    multipleOf: 0.0001
    maximum: 99999999999.9999
    examples:
      - 100.0
      - 1200.0
  
  recommendedRetailPrice:
    type: ["number", "null"]
    description: |
      Recommended retail price (MSRP) (converted from ETIM xChange string to number).
      
      **ETIM xChange**: `RecommendedRetailPrice` (string with pattern)
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].RecommendedRetailPrice`
    minimum: 0
    multipleOf: 0.0001
    maximum: 99999999999.9999
    examples:
      - 150.0
      - 1800.0
  
  vat:
    type: ["number", "null"]
    description: |
      VAT/tax percentage (converted from ETIM xChange string to number).
      
      **ETIM xChange**: `Vat` (string with pattern)
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].Vat`
    minimum: 0
    multipleOf: 0.01
    maximum: 99.99
    examples:
      - 21.0
      - 19.0
  
  priceValidityDate:
    type: string
    format: date
    description: |
      Date from which the price is valid. ISO 8601 date format (YYYY-MM-DD).
      Defaults to CatalogueValidityStart if not overridden at the pricing level.
      
      **ETIM xChange**: `PriceValidityDate`  
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].PriceValidityDate`  
      **Default from**: `CatalogueValidityStart`
    examples:
      - "2025-01-01"
  
  priceExpiryDate:
    type: ["string", "null"]
    format: date
    description: |
      Date when the price expires. ISO 8601 date format (YYYY-MM-DD).
      
      **ETIM xChange**: `PriceExpiryDate`
      **Path**: `Supplier[].Product[].TradeItem[].Pricing[].PriceExpiryDate`
    examples:
      - "2025-12-31"

examples:
  # Standard pricing - single quantity
  - supplierIdGln: "8712423012485"
    supplierItemNumber: "SKU-LAMP-001"
    pricingRef: "price-c62-1-20250101"
    priceUnit: C62
    priceQuantity: 1
    currencyCode: EUR
    priceOnRequest: false
    grossListPrice: 12.99
    netPrice: 9.99
    recommendedRetailPrice: 15.99
    vat: 21.0
    priceValidityDate: "2025-01-01"
    priceExpiryDate: "2025-12-31"
  
  # Quantity tier pricing - same item, different quantity
  - supplierIdGln: "8712423012485"
    supplierItemNumber: "SKU-CABLE-002"
    pricingRef: "price-mtr-1-20250101"
    priceUnit: MTR
    priceUnitFactor: 1.0
    priceQuantity: 1
    currencyCode: EUR
    priceOnRequest: false
    grossListPrice: 2.50
    netPrice: 1.99
    recommendedRetailPrice: 3.49
    vat: 21.0
    priceValidityDate: "2025-01-01"
    priceExpiryDate: "2025-06-30"
  
  # Quantity tier pricing - bulk discount
  - supplierIdGln: "8712423012485"
    supplierItemNumber: "SKU-CABLE-002"
    pricingRef: "price-mtr-100-20250101"
    priceUnit: MTR
    priceUnitFactor: 1.0
    priceQuantity: 100
    currencyCode: EUR
    priceOnRequest: false
    grossListPrice: 2.00
    netPrice: 1.59
    recommendedRetailPrice: 2.99
    vat: 21.0
    priceValidityDate: "2025-01-01"
    priceExpiryDate: "2025-06-30"
