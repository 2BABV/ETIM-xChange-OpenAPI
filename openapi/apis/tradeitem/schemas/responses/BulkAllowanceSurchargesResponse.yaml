type: object
description: |
  Bulk response containing trade item allowance and surcharge information with cursor-based pagination.
  
  **Flattened Structure**: Each row in the `data` array represents a single allowance/surcharge entry
  with embedded keys for joining back to pricing data. This follows the same pattern as 
  `ProductEtimClassificationFeature` - 1 row per data point.
  
  **Join Keys**: Use `tradeItemRef` + `pricingRef` to join
  with `/bulk/trade-item-pricings` data.
  
  Use the `cursor` from `meta` to retrieve the next page of results.
  
  **ETIM xChange**: Response wrapper for `AllowanceSurcharge[]` data
  **Path**: `Supplier[].Product[].TradeItem[].Pricing[].AllowanceSurcharge[]`
additionalProperties: false
required:
  - data
  - meta
properties:
  data:
    type: array
    description: Array of flattened allowance/surcharge entries (1 row per surcharge)
    items:
      $ref: ../domain/AllowanceSurchargeSummary.yaml
  meta:
    $ref: ../../../../shared/schemas/common/CursorPaginationMetadata.yaml
    description: Cursor-based pagination metadata

examples:
  - data:
      # Percentage-based allowance
      - tradeItemRef: "ti-001"
        pricingRef: "price-c62-1-20250101"
        allowanceSurchargeRef: "as-001"
        allowanceSurchargeIndicator: ALLOWANCE
        allowanceSurchargeType: AEQ
        allowanceSurchargeSequenceNumber: 1
        allowanceSurchargePercentage: 5.5
        allowanceSurchargeMinimumQuantity: 50
        allowanceSurchargeDescription: "Bulk quantity discount"
      # Fixed amount surcharge
      - tradeItemRef: "ti-002"
        pricingRef: "price-mtr-1-20250101"
        allowanceSurchargeRef: "as-002"
        allowanceSurchargeIndicator: SURCHARGE
        allowanceSurchargeType: DBD
        allowanceSurchargeSequenceNumber: 1
        allowanceSurchargeAmount: 25.00
        allowanceSurchargeDescription: "Delivery surcharge"
      # Multiple allowances for same price (volume tiers)
      - tradeItemRef: "ti-003"
        pricingRef: "price-c62-1-20250101"
        allowanceSurchargeRef: "as-003"
        allowanceSurchargeIndicator: ALLOWANCE
        allowanceSurchargeType: AEQ
        allowanceSurchargeSequenceNumber: 1
        allowanceSurchargePercentage: 10.0
        allowanceSurchargeMinimumQuantity: 100
        allowanceSurchargeDescription: "Volume discount tier 1"
      - tradeItemRef: "ti-003"
        pricingRef: "price-c62-1-20250101"
        allowanceSurchargeRef: "as-004"
        allowanceSurchargeIndicator: ALLOWANCE
        allowanceSurchargeType: AEQ
        allowanceSurchargeSequenceNumber: 2
        allowanceSurchargePercentage: 15.0
        allowanceSurchargeMinimumQuantity: 500
        allowanceSurchargeDescription: "Volume discount tier 2"
    meta:
      cursor: "eyJzdXBwbGllcklkR2xuIjoiODcxMjQyMzAxMjQ4NSIsInNlcXVlbmNlIjoyfQ=="
      hasNext: true
      hasPrev: false
      limit: 100
      estimatedTotal: 3250
